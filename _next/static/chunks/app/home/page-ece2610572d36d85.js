(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{42634:()=>{},62184:(e,t,r)=>{Promise.resolve().then(r.bind(r,3571))},94297:e=>{e.exports='; draw shapes see-thru and outlined in white\nopacity 1/4\nstroke "white"\n\n; count from 0 to 360 in 3 degree increments\nfor a from 0 to 360 by 3 do\n  ; randomly generate a fill color\n  red = rand()\n  green = rand()\n  blue = rand()\n  rgb = color(red, green, blue)\n  fill rgb\n\n  ; set the rotation and scale factor\n  rotate a\n  scale a/180\n\n  ; draw a 60x40 box\n  rect a, a, 60, 40\n\n  ; see what happens when you uncomment this!\n  ; snapshot\nend\n'},3571:(e,t,r)=>{"use strict";r.d(t,{default:()=>ej});var n=r(23026),s=r(95155),a=r(51248),o=r(81784),l=r(87928),i=r(7200),u=r(63639),c=r(12115),h=r(27131),f=r(84274);function d(e){return(t,r)=>{if(P(t)!==P(r))throw Error("operands must be of the same type");return e(t,r)}}function p(e){let t=d(e);return(e,r)=>{let n=t(e,r);if(n!=n)throw Error("result is not a number");return n}}function g(e,t){return e>0?e-1:Math.max(0,t+e)}let b={num(e){let t=parseFloat(e);if(t!=t)throw Error("cannot convert value to a number");return t},str:e=>P(e).repr(e),rand:()=>Math.random(),swap:(e,t)=>({[E]:[t,e],[F]:null}),sleep:e=>new Promise(t=>{setTimeout(t,1e3*e)})},x={enumerate(){throw Error("object does not support iteration")},getindex(){throw Error("object does not support []")},setindex(){throw Error("object does not support []")},globals:{},methods:{},unaryops:{},binaryops:{"=":(e,t)=>e===t,"!=":(e,t)=>e!==t,"<":d((e,t)=>e<t),"<=":d((e,t)=>e<=t),">":d((e,t)=>e>t),">=":d((e,t)=>e>=t)}},m={...x,repr:()=>"*none*"},y={...x,repr:e=>e?"*true*":"*false*"},v={...x,repr:e=>isFinite(e)?String(e):e>0?"*infinity*":"-*infinity*",methods:{abs:e=>Math.abs(e),acos:e=>180*Math.acos(e)/Math.PI,asin:e=>180*Math.asin(e)/Math.PI,atan:e=>180*Math.atan(e)/Math.PI,cbrt:e=>Math.cbrt(e),ceil:e=>Math.ceil(e),clamp:(e,t,r)=>Math.min(Math.max(e,t),r),cos:e=>Math.cos(e*Math.PI/180),exp:(e,t)=>void 0===t?Math.exp(t=e):Math.pow(e,t),floor:e=>Math.floor(e),log:(e,t)=>void 0===t?Math.log(t=e):10===e?Math.log10(t):Math.log10(t)/Math.log10(e),rand:(e,t)=>Math.floor(Math.random()*(t-e+1))+e,round:e=>Math.round(e),sign:e=>Math.sign(e),sin:e=>Math.sin(e*Math.PI/180),sqrt:e=>Math.sqrt(e),tan:e=>Math.tan(e*Math.PI/180),max(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Math.max(...t)},min(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Math.min(...t)}},unaryops:{"+":e=>+e,"-":e=>-e,"~":e=>~e},binaryops:{...x.binaryops,"+":p((e,t)=>e+t),"-":p((e,t)=>e-t),"*":p((e,t)=>e*t),"/":p((e,t)=>e/t),"%":p((e,t)=>e%t),"&":p((e,t)=>e&t),"|":p((e,t)=>e|t),"^":p((e,t)=>e^t)}},j={...x,repr:e=>e,enumerate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{value:e.charAt(t),more:t<e.length,next:()=>j.enumerate(e,t+1)}},getindex:(e,t)=>e.charAt(g(t,e.length)),setindex:(e,t,r)=>(t=g(t,e.length),e.substr(0,t)+r+e.substr(t+1)),methods:{len:e=>e.length,first:(e,t)=>e.indexOf(t)+1,last:(e,t)=>e.lastIndexOf(t)+1,copy:(e,t,r)=>(t=g(t,e.length),r=g(r,e.length),e.substring(t,r+1)),replace:(e,t,r)=>({[E]:[e.replace(t,r)]}),reverse:e=>({[E]:[e.split("").reverse().join("")]}),split:(e,t)=>e.split(t||" "),upper:e=>e.toUpperCase(),lower:e=>e.toLowerCase()},binaryops:{...x.binaryops,$:(e,t)=>e+P(t).repr(t)}};function A(e,t){let r=P(e);return r.binaryops["<"](e,t)?-1:r.binaryops[">"](e,t)?1:0}function w(e,t){return-A(e,t)}let M={...x,binaryops:{"=":(e,t)=>f(e,t),"!=":(e,t)=>!f(e,t)}},k={...M,repr:e=>"[ "+e.map(e=>P(e).repr(e)).join(", ")+" ]",getindex:(e,t)=>(t=g(t,e.length),e[t]),setindex:(e,t,r)=>(t=g(t,e.length),(0,h.jM)(e,e=>{e[t]=r})),enumerate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{value:e[t],more:t<e.length,next:()=>k.enumerate(e,t+1)}},globals:{list(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.jM)([],e=>{e.push(...t)})}},methods:{len:e=>e.length,first:(e,t)=>e.indexOf(t)+1,last:(e,t)=>e.lastIndexOf(t)+1,copy:(e,t,r)=>(t=g(t,e.length),r=g(r,e.length),e.slice(t,r+1)),add(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{[E]:[(0,h.jM)(e,e=>{e.push(...r)})]}},insert(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];return t=g(t,e.length),{[E]:[(0,h.jM)(e,e=>{e.splice(t,0,...n)})]}},remove(e,t,r){let n;t=g(t,e.length);let s=(0,h.jM)(e,e=>{n=void 0===r?e.splice(t,1)[0]:e.splice(t,r-t+1)});return{[F]:n,[E]:[s]}},join:(e,t)=>e.join(t||" "),sum:e=>e.reduce((e,t)=>P(e).binaryops["+"](e,t)),min:e=>e.reduce((e,t)=>P(t).binaryops["<"](t,e)?t:e),max:e=>e.reduce((e,t)=>P(t).binaryops[">"](t,e)?t:e),avg:e=>k.methods.sum(e)/e.length,sort:e=>({[E]:[(0,h.jM)(e,e=>{e.sort(A)})]}),rsort:e=>({[E]:[(0,h.jM)(e,e=>{e.sort(w)})]}),reverse:e=>({[E]:[(0,h.jM)(e,e=>{e.reverse()})]}),shuffle:e=>({[E]:[(0,h.jM)(e,t=>{for(let r=0;r<e.length;++r){let n=Math.floor(Math.random()*r);t[r]=e[n],t[n]=e[r]}})]})},binaryops:{...M.binaryops,$:d((e,t)=>e.concat(t))}},C={...M,repr:e=>"[ "+Object.keys(e).map(t=>{let r=e[t];return P(t).repr(t)+": "+P(r).repr(r)}).join(", ")+" ]",getindex:(e,t)=>e[t],setindex:(e,t,r)=>(0,h.jM)(e,e=>{e[t]=r}),enumerate:e=>k.enumerate(Object.keys(e)),globals:{table(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.jM)({},e=>{for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1]})}},methods:{len:e=>Object.keys(e).length,keys:e=>Object.keys(e),put(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{[E]:[(0,h.jM)(e,e=>{for(let t=0;t<r.length;t+=2)e[r[t]]=r[t+1]})]}},remove(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let s=[];return{[E]:[(0,h.jM)(e,t=>{for(let n=0;n<r.length;++n){let a=r[n];s.push(e[a]),delete t[a]}})],[F]:1===s.length?s[0]:s}}},binaryops:{...M.binaryops,$:d((e,t)=>({...e,...t}))}},S={...x,repr:e=>e.toString(),globals:{time(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return new Date;if(1===t.length){if("number"!=typeof t[0])throw Error("argument is not a number");return new Date(t[0])}if(t.length<=7){for(let e=0;e<t.length;++e)if("number"!=typeof t[e])throw Error("argument is not a number");return t[1]--,new Date(...t)}}},methods:{part(e,t){switch(t.toLowerCase()){case"year":case"years":return e.getFullYear();case"month":case"months":return e.getMonth()+1;case"day":case"days":return e.getDate()+1;case"weekday":case"weekdays":return e.getDay()+1;case"hour":case"hours":return e.getHours();case"minute":case"minutes":return e.getMinutes();case"second":case"seconds":return e.getSeconds();case"millisecond":case"milliseconds":return e.getMilliseconds();default:throw Error("invalid time unit: ".concat(t))}},after(e,t,r){let n=new Date(e);switch(r.toLowerCase()){case"year":case"years":return n.setFullYear(e.getFullYear()+t),n;case"month":case"months":return n.setMonth(e.getMonth()+t),n;case"day":case"days":return n.setDate(e.getDate()+t),n;case"hour":case"hours":return n.setHours(e.getHours()+t),n;case"minute":case"minutes":return n.setMinute(e.getMinutes()+t),n;case"second":case"seconds":return n.setSeconds(e.getSeconds()+t),n;case"millisecond":case"milliseconds":return n.setMilliseconds(e.getMilliseconds()+t),n;default:throw Error("invalid time unit: ".concat(r))}},before(e,t,r){let n=new Date(e);switch(r.toLowerCase()){case"year":case"years":return n.setFullYear(e.getFullYear()-t),n;case"month":case"months":return n.setMonth(e.getMonth()-t),n;case"day":case"days":return n.setDate(e.getDate()-t),n;case"hour":case"hours":return n.setHours(e.getHours()-t),n;case"minute":case"minutes":return n.setMinute(e.getMinutes()-t),n;case"second":case"seconds":return n.setSeconds(e.getSeconds()-t),n;case"millisecond":case"milliseconds":return n.setMilliseconds(e.getMilliseconds()-t),n;default:throw Error("invalid time unit: ".concat(r))}},startof(e,t){let r=new Date(e);switch(t.toLowerCase()){case"year":case"years":r.setMonth(0);case"month":case"months":r.setDate(1);case"day":case"days":r.setHours(0);case"hour":case"hours":r.setMinutes(0);case"minute":case"minutes":r.setSeconds(0);case"second":case"seconds":r.setMilliseconds(0);case"millisecond":case"milliseconds":return r;default:throw Error("invalid time unit: ".concat(t))}},endof(e,t){let r=new Date(e);switch(t.toLowerCase()){case"year":case"years":r.setMonth(11);case"month":case"months":r.setDate(new Date(r.getFullYear(),r.getMonth()+1,0).getDate());case"day":case"days":r.setHours(23);case"hour":case"hours":r.setMinutes(59);case"minute":case"minutes":r.setSeconds(59);case"second":case"seconds":r.setMilliseconds(999);case"millisecond":case"milliseconds":return r;default:throw Error("invalid time unit: ".concat(t))}},diff(e,t,r){let n=t-e;switch(r.toLowerCase()){case"year":case"years":return t.getFullYear()-e.getFullYear();case"month":case"months":return 12*(t.getFullYear()-e.getFullYear())+t.getMonth()-e.getMonth();case"day":case"days":return Math.floor(n/1e3/60/60/24);case"hour":case"hours":return Math.floor(n/1e3/60/60);case"minute":case"minutes":return Math.floor(n/1e3/60);case"second":case"seconds":return Math.floor(n/1e3);case"millisecond":case"milliseconds":return Math.floor(n);default:throw Error("invalid time unit: ".concat(r))}}},binaryops:{...x.binaryops,"=":(e,t)=>+e==+t,"!=":(e,t)=>+e!=+t}},O=Symbol("START_HANDLER"),E=Symbol("START_ASSIGN"),F=Symbol("START_RESULT"),I=Object.prototype.hasOwnProperty,D={pop:"out"};function P(e){if(null==e)return m;switch(typeof e){case"boolean":return y;case"number":return v;case"string":return j;case"object":if(e.constructor===Date)return S;if(Array.isArray(e))return k;return e[O]||C;default:throw Error("could not determine type for ".concat(e))}}function z(e){return{node:e,state:0,ns:!1,count:0,times:0,from:0,to:0,by:1,indexes:[],args:[],assn:[],iter:null,left:null}}function R(){return new Promise(e=>{setTimeout(e,0)})}let T=e=>{return{clear(){e.clearDisplay()},print(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>0)for(let e=0;e<t.length;++e){let r=t[e];s(P(r).repr(r))}else s("");return R()},input:t=>new Promise(r=>{e.setInputState({prompt:t,onInputComplete:e=>{r(e)}})}),rect:(e,r,n,s)=>(t({type:"rect",x:0,y:0,width:0,height:0,x:e,y:r,width:n,height:s}),R()),circle:(e,r,n)=>(t({type:"circle",cx:0,cy:0,r:0,cx:e,cy:r,r:n}),R()),ellipse:(e,r,n,s)=>(t({type:"ellipse",cx:0,cy:0,rx:0,ry:0,cx:e,cy:r,rx:n,ry:s}),R()),line:(e,r,n,s)=>(t({type:"line",x1:0,y1:0,x2:0,y2:0,x1:e,y1:r,x2:n,y2:s}),R()),text:(e,r,n)=>(t({type:"text",x:0,y:0,value:"",x:e,y:r,value:n}),R()),polygon(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return Array.isArray(r[0])&&(r=r[0]),t({type:"polygon",points:[],points:r}),R()},color(e,t,r){let n=e=>("0"+Math.round(255*e).toString(16)).substr(-2);return"#".concat(n(e)).concat(n(t)).concat(n(r))},fill(e){r(t=>{t.fill=e})},stroke(e){r(t=>{t.stroke=e})},opacity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r(t=>{t.opacity=e})},anchor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"center";r(t=>{t.anchor=e})},rotate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r(t=>{t.rotate=e})},scale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;r(r=>{r.scalex=e,r.scaley=t})},align(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start";n(t=>{t.align=e})},font(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Helvetica",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36;n(r=>{r.fface=e,r.fsize=t})}};function t(t){e.setGfx(e=>(0,h.jM)(e,r=>{r.shapes.push((0,h.jM)(t,t=>{t.sprops=e.sprops,t.tprops=e.tprops}))}))}function r(t){e.setGfx(e=>(0,h.jM)(e,e=>{t(e.sprops)}))}function n(t){e.setGfx(e=>(0,h.jM)(e,e=>{t(e.tprops)}))}function s(t){e.setBuf(e=>(0,h.jM)(e,e=>{e.push(t)}))}},L={shapes:[],sprops:{stroke:null,fill:null,opacity:null,anchor:"center",rotate:0,scalex:1,scaley:1},tprops:{fface:"Helvetica",fsize:36,align:"start"}};var _=r(105);let H={repeat:"loop",for:"loop",forIn:"loop",while:"loop",call:"call"},Y={repeat:"loop",for:"loop",forIn:"loop",while:"loop",if:"stmt",begin:"stmt",call:"stmt",exit:"stmt",break:"stmt",next:"stmt",return:"stmt",literal:"expr",var:"expr",let:"stmt",index:"expr",letIndex:"stmt",logicalOp:"expr",binaryOp:"expr",unaryOp:"expr"};function $(e,t,r,n){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,$.prototype),s.expected=t,s.found=r,s.location=n,s.name="SyntaxError",s}function N(e,t,r){return(r=r||" ",e.length>t)?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}($,Error),$.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,a=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,o=this.location.source+":"+a.line+":"+a.column;if(n){var l=this.location.end,i=N("",a.line.toString().length," "),u=n[s.line-1],c=(s.line===l.line?l.column:u.length+1)-s.column||1;t+="\n --\x3e "+o+"\n"+i+" |\n"+a.line+" | "+u+"\n"+i+" | "+N("",s.column-1," ")+N("",c,"^")}else t+="\n at "+o}return t},$.buildMessage=function(e,t){var r={literal:function(e){return'"'+s(e.text)+'"'},class:function(e){var t=e.parts.map(function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)});return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function s(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function o(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(o);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(t?'"'+s(t)+'"':"end of input")+" found."};var q=r(94297),G=r.n(q);function V(e){let{setParser:t}=e,r=(0,c.useCallback)(e=>{e.focus(),t(()=>()=>(function(e,t){var r,n,s,a,o={},l=(t=void 0!==t?t:{}).grammarSource,i={start:e9},u=e9,c="then",h="else",f="repeat",d="from",p="while",g="begin",b="exit",x="break",m="next",y="return",v="local",j="none",A="true",w="false",M="infinity",k=/^[&\^|]/,C=/^[+\-]/,S=/^[%*\/]/,O=/^[+\-~]/,E=/^[^"`]/,F=/^[eE]/,I=/^[\-+]/,D=/^[0-9]/,P=/^[a-z_]/i,z=/^[a-z0-9_]/i,R=/^[ \t]/,T=/^[^\n]/,L=e1("if",!1),_=e1("then",!1),N=e1("else",!1),q=e1("end",!1),G=e1("repeat",!1),V=e1("do",!1),U=e1("for",!1),K=e1("from",!1),B=e1("to",!1),J=e1("by",!1),Q=e1("in",!1),W=e1("while",!1),X=e1("begin",!1),Z=e1("(",!1),ee=e1(")",!1),et=e1(",",!1),er=e1("exit",!1),en=e1("break",!1),es=e1("next",!1),ea=e1("return",!1),eo=e1("local",!1),el=e1("=",!1),ei=e1("let",!1),eu=e4("a value"),ec=e1("and",!1),eh=e1("or",!1),ef=e1("not",!1),ed=e1("!=",!1),ep=e1("<=",!1),eg=e1("<",!1),eb=e1(">=",!1),ex=e1(">",!1),em=e1("$",!1),ey=e2(["&","^","|"],!1,!1),ev=e2(["+","-"],!1,!1),ej=e2(["%","*","/"],!1,!1),eA=e2(["+","-","~"],!1,!1),ew=e1("[",!1),eM=e1("]",!1),ek=e1(".",!1),eC=e4("a string"),eS=e1('"',!1),eO=e1("`",!1),eE=e1('""',!1),eF=e1("``",!1),eI=e2(['"',"`"],!0,!1),eD=e1("none",!1),eP=e1("true",!1),ez=e1("false",!1),eR=e4("a number"),eT=e1("infinity",!1),eL=e2(["e","E"],!1,!1),e_=e2(["-","+"],!1,!1),eH=e2([["0","9"]],!1,!1),eY=e4("a name"),e$=e2([["a","z"],"_"],!1,!0),eN=e2([["a","z"],["0","9"],"_"],!1,!0),eq=e4("whitespace"),eG=e2([" ","	"],!1,!1),eV=e1(";",!1),eU=e2(["\n"],!0,!1),eK=e4("end of line"),eB=e1("\n",!1),eJ=0|t.peg$currPos,eQ=eJ,eW=[{line:1,column:1}],eX=eJ,eZ=t.peg$maxFailExpected||[],e0=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in i))throw Error("Can't start parsing from rule \""+t.startRule+'".');u=i[t.startRule]}function e1(e,t){return{type:"literal",text:e,ignoreCase:t}}function e2(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function e4(e){return{type:"other",description:e}}function e3(t){var r,n=eW[t];if(n)return n;if(t>=eW.length)r=eW.length-1;else for(r=t;!eW[--r];);for(n={line:(n=eW[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return eW[t]=n,n}function e6(e,t,r){var n=e3(e),s=e3(t),a={source:l,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:s.line,column:s.column}};return r&&l&&"function"==typeof l.offset&&(a.start=l.offset(a.start),a.end=l.offset(a.end)),a}function e5(e){eJ<eX||(eJ>eX&&(eX=eJ,eZ=[]),eZ.push(e))}function e9(){var e,t;return e=eJ,tk(),t=e8(),eQ=e,e=t}function e8(){var e,t,r,n;for(e=eJ,t=[],r=eJ,tM(),(n=e7())!==o&&tk()!==o?r=n:(eJ=r,r=o);r!==o;)t.push(r),r=eJ,tM(),(n=e7())!==o&&tk()!==o?r=n:(eJ=r,r=o);return eQ=e,e=t=tC("block",{elems:t})}function e7(){var t,r,n,s,a,l,i,u,b,x,m,y,v,j,A,w,M,k,C,S,O,E,F,I,D,P,z,R,T,H,Y,$,er;return(r=function(){var t,r,n,s,a,l,i,u,f,d,p,g,b,x,m;if((t=eJ,"if"===e.substr(eJ,2)?(r="if",eJ+=2):(r=o,0===e0&&e5(L)),r!==o&&tw()!==o&&(tM(),(n=tn())!==o&&(tM(),e.substr(eJ,4)===c?(s=c,eJ+=4):(s=o,0===e0&&e5(_)),s!==o&&tw()!==o&&(tM(),(a=tt())!==o))))?(l=eJ,i=tM(),e.substr(eJ,4)===h?(u=h,eJ+=4):(u=o,0===e0&&e5(N)),u!==o&&tw()!==o?(f=tM(),(d=tt())!==o?l=d:(eJ=l,l=o)):(eJ=l,l=o),l===o&&(l=null),eQ=t,t=tS([[n,a]],l)):(eJ=t,t=o),t===o){if(t=eJ,"if"===e.substr(eJ,2)?(r="if",eJ+=2):(r=o,0===e0&&e5(L)),r!==o){if(tw()!==o){if(tM(),(n=tn())!==o){if(tM(),e.substr(eJ,4)===c?(s=c,eJ+=4):(s=o,0===e0&&e5(_)),s!==o){if(tw()!==o){if(tM(),(a=tk())!==o){if((l=e8())!==o){for(i=[],u=eJ,tM(),e.substr(eJ,4)===h?(f=h,eJ+=4):(f=o,0===e0&&e5(N)),f!==o&&(d=tw())!==o?(tM(),"if"===e.substr(eJ,2)?(p="if",eJ+=2):(p=o,0===e0&&e5(L)),p!==o&&(g=tw())!==o?(tM(),(b=tn())!==o?(tM(),e.substr(eJ,4)===c?(x=c,eJ+=4):(x=o,0===e0&&e5(_)),x!==o&&tw()!==o?(tM(),tk()!==o&&(m=e8())!==o?u=[b,m]:(eJ=u,u=o)):(eJ=u,u=o)):(eJ=u,u=o)):(eJ=u,u=o)):(eJ=u,u=o);u!==o;)i.push(u),u=eJ,tM(),e.substr(eJ,4)===h?(f=h,eJ+=4):(f=o,0===e0&&e5(N)),f!==o&&(d=tw())!==o?(tM(),"if"===e.substr(eJ,2)?(p="if",eJ+=2):(p=o,0===e0&&e5(L)),p!==o&&(g=tw())!==o?(tM(),(b=tn())!==o?(tM(),e.substr(eJ,4)===c?(x=c,eJ+=4):(x=o,0===e0&&e5(_)),x!==o&&tw()!==o?(tM(),tk()!==o&&(m=e8())!==o?u=[b,m]:(eJ=u,u=o)):(eJ=u,u=o)):(eJ=u,u=o)):(eJ=u,u=o)):(eJ=u,u=o);(u=eJ,tM(),e.substr(eJ,4)===h?(f=h,eJ+=4):(f=o,0===e0&&e5(N)),f!==o&&(d=tw())!==o?(tM(),(p=tk())!==o&&(g=e8())!==o?u=g:(eJ=u,u=o)):(eJ=u,u=o),u===o&&(u=null),tM(),"end"===e.substr(eJ,3)?(f="end",eJ+=3):(f=o,0===e0&&e5(q)),f!==o)?(eQ=t,t=tS([[n,l],...i],u)):(eJ=t,t=o)}else eJ=t,t=o}else eJ=t,t=o}else eJ=t,t=o}else eJ=t,t=o}else eJ=t,t=o}else eJ=t,t=o}else eJ=t,t=o}return t}())===o&&((n=eJ,e.substr(eJ,6)===f?(s=f,eJ+=6):(s=o,0===e0&&e5(G)),s!==o&&tw()!==o&&(tM(),(a=tn())!==o&&(tM(),"do"===e.substr(eJ,2)?(l="do",eJ+=2):(l=o,0===e0&&e5(V)),l!==o&&(i=tw())!==o&&(tM(),(u=te())!==o))))?(eQ=n,n=tC("repeat",{times:a,body:u})):(eJ=n,n=o),n===o&&((n=eJ,e.substr(eJ,6)===f?(s=f,eJ+=6):(s=o,0===e0&&e5(G)),s!==o&&tw()!==o&&(tM(),"do"===e.substr(eJ,2)?(a="do",eJ+=2):(a=o,0===e0&&e5(V)),a!==o&&tw()!==o&&(l=tM(),(i=te())!==o)))?(eQ=n,n=tC("repeat",{body:i})):(eJ=n,n=o)),(r=n)===o&&((b=eJ,"for"===e.substr(eJ,3)?(x="for",eJ+=3):(x=o,0===e0&&e5(U)),x!==o&&tw()!==o&&(tM(),(m=tA())!==o&&(tM(),e.substr(eJ,4)===d?(y=d,eJ+=4):(y=o,0===e0&&e5(K)),y!==o&&tw()!==o&&(tM(),(v=tn())!==o&&(tM(),"to"===e.substr(eJ,2)?(j="to",eJ+=2):(j=o,0===e0&&e5(B)),j!==o&&tw()!==o&&(tM(),(A=tn())!==o&&(w=eJ,tM(),"by"===e.substr(eJ,2)?(M="by",eJ+=2):(M=o,0===e0&&e5(J)),M!==o&&tw()!==o?(tM(),(k=tn())!==o?w=k:(eJ=w,w=o)):(eJ=w,w=o),w===o&&(w=null),tM(),"do"===e.substr(eJ,2)?(M="do",eJ+=2):(M=o,0===e0&&e5(V)),M!==o&&tw()!==o&&(tM(),(k=te())!==o))))))))?(eQ=b,C=m,S=v,b=tC("for",{name:C,from:S,to:O=A,by:w,body:k})):(eJ=b,b=o),b===o&&((b=eJ,"for"===e.substr(eJ,3)?(x="for",eJ+=3):(x=o,0===e0&&e5(U)),x!==o&&tw()!==o&&(tM(),(m=tA())!==o&&(tM(),"in"===e.substr(eJ,2)?(y="in",eJ+=2):(y=o,0===e0&&e5(Q)),y!==o&&tw()!==o&&(tM(),(v=tn())!==o&&(tM(),"do"===e.substr(eJ,2)?(j="do",eJ+=2):(j=o,0===e0&&e5(V)),j!==o&&tw()!==o&&(tM(),(A=te())!==o))))))?(eQ=b,b=tC("forIn",{name:m,range:v,body:A})):(eJ=b,b=o)),(r=b)===o&&((E=eJ,e.substr(eJ,5)===p?(F=p,eJ+=5):(F=o,0===e0&&e5(W)),F!==o&&tw()!==o&&(tM(),(I=tn())!==o&&(tM(),"do"===e.substr(eJ,2)?(D="do",eJ+=2):(D=o,0===e0&&e5(V)),D!==o&&tw()!==o&&(tM(),(P=te())!==o))))?(eQ=E,E=tC("while",{cond:I,body:P})):(eJ=E,E=o),(r=E)===o)))&&((z=eJ,e.substr(eJ,5)===g?(R=g,eJ+=5):(R=o,0===e0&&e5(X)),R!==o&&tw()!==o&&(tM(),(T=tA())!==o&&(H=eJ,tM(),40===e.charCodeAt(eJ)?(Y="(",eJ++):(Y=o,0===e0&&e5(Z)),Y!==o?(tk(),tM(),($=function(){var t,r,n,s,a,l;if(t=eJ,(r=tA())!==o){for(n=[],s=eJ,tM(),44===e.charCodeAt(eJ)?(a=",",eJ++):(a=o,0===e0&&e5(et)),a!==o?(tM(),tk(),tM(),(l=tA())!==o?s=l:(eJ=s,s=o)):(eJ=s,s=o);s!==o;)n.push(s),s=eJ,tM(),44===e.charCodeAt(eJ)?(a=",",eJ++):(a=o,0===e0&&e5(et)),a!==o?(tM(),tk(),tM(),(l=tA())!==o?s=l:(eJ=s,s=o)):(eJ=s,s=o);eQ=t,t=[r,...n]}else eJ=t,t=o;return t}())===o&&($=null),tM(),41===e.charCodeAt(eJ)?(er=")",eJ++):(er=o,0===e0&&e5(ee)),er!==o?H=$:(eJ=H,H=o)):(eJ=H,H=o),H===o&&(H=null),tM(),"do"===e.substr(eJ,2)?(Y="do",eJ+=2):(Y=o,0===e0&&e5(V)),Y!==o&&tw()!==o&&(tM(),($=te())!==o))))?(eQ=z,z=tC("begin",{name:T,params:H,body:$})):(eJ=z,z=o),r=z),(t=r)===o&&(t=tt()),t}function te(){var t,r,n;return(t=tt())===o&&((t=eJ,tk()!==o&&(r=e8())!==o&&(tM(),"end"===e.substr(eJ,3)?(n="end",eJ+=3):(n=o,0===e0&&e5(q)),n!==o))?(eQ=t,t=r):(eJ=t,t=o)),t}function tt(){var t,r,n,s,a,l,i,u,c,h,f,d,p,g,j,A,w,M,k,C,S,O;return r=eJ,e.substr(eJ,4)===b?(n=b,eJ+=4):(n=o,0===e0&&e5(er)),n!==o&&tw()!==o?(eQ=r,r=tC("exit")):(eJ=r,r=o),r===o&&(r=eJ,e.substr(eJ,5)===x?(n=x,eJ+=5):(n=o,0===e0&&e5(en)),n!==o&&tw()!==o?(eQ=r,r=tC("break")):(eJ=r,r=o),r===o&&(r=eJ,e.substr(eJ,4)===m?(n=m,eJ+=4):(n=o,0===e0&&e5(es)),n!==o&&tw()!==o?(eQ=r,r=tC("next")):(eJ=r,r=o),r===o))&&((r=eJ,e.substr(eJ,6)===y?(n=y,eJ+=6):(n=o,0===e0&&e5(ea)),n!==o&&tw()!==o)?(s=eJ,tM(),(a=tn())!==o?s=a:(eJ=s,s=o),s===o&&(s=null),eQ=r,r=tC("return",{result:s})):(eJ=r,r=o)),(t=r)===o&&((f=eJ,e.substr(eJ,5)===v?(d=v,eJ+=5):(d=o,0===e0&&e5(eo)),d!==o&&(p=tw())!==o&&(g=tM(),(j=tA())!==o&&(A=tM(),61===e.charCodeAt(eJ)?(w="=",eJ++):(w=o,0===e0&&e5(el)),w!==o&&(M=tM(),(k=tn())!==o))))?(eQ=f,f=tC("let",{name:j,value:k,local:!0})):(eJ=f,f=o),f===o&&((f=eJ,d=eJ,"let"===e.substr(eJ,3)?(p="let",eJ+=3):(p=o,0===e0&&e5(ei)),p!==o&&(g=tw())!==o?d=p=[p,g]:(eJ=d,d=o),d===o&&(d=null),p=tM(),(g=tA())!==o&&(j=tM(),(A=tx())===o&&(A=null),w=tM(),61===e.charCodeAt(eJ)?(M="=",eJ++):(M=o,0===e0&&e5(el)),M!==o&&(k=tM(),(C=tn())!==o)))?(eQ=f,S=g,f=(O=A)?tE(S,O,C):tC("let",{name:S,value:C})):(eJ=f,f=o)),(t=f)===o)&&((l=eJ,(i=tA())!==o&&(tM(),(u=tr())!==o))?(eQ=l,l=tC("call",{name:i,args:u})):(eJ=l,l=o),l===o&&((l=eJ,(i=tA())!==o&&(tM(),40===e.charCodeAt(eJ)?(u="(",eJ++):(u=o,0===e0&&e5(Z)),u!==o&&(tM(),tk(),tM(),(c=tr())===o&&(c=null),tM(),41===e.charCodeAt(eJ)?(h=")",eJ++):(h=o,0===e0&&e5(ee)),h!==o)))?(eQ=l,l=tC("call",{name:i,args:c})):(eJ=l,l=o),l===o&&(l=eJ,(i=tA())!==o&&(eQ=l,i=tC("call",{name:i,args:null})),l=i)),t=l),t}function tr(){var t,r,n,s,a,l;if(t=eJ,(r=tn())!==o){for(n=[],s=eJ,tM(),44===e.charCodeAt(eJ)?(a=",",eJ++):(a=o,0===e0&&e5(et)),a!==o?(tM(),tk(),tM(),(l=tn())!==o?s=l:(eJ=s,s=o)):(eJ=s,s=o);s!==o;)n.push(s),s=eJ,tM(),44===e.charCodeAt(eJ)?(a=",",eJ++):(a=o,0===e0&&e5(et)),a!==o?(tM(),tk(),tM(),(l=tn())!==o?s=l:(eJ=s,s=o)):(eJ=s,s=o);eQ=t,t=[r,...n]}else eJ=t,t=o;return t}function tn(){var e;return e0++,e=function(){var e,t,r,n,s,a;if(e=eJ,(t=ta())!==o){for(r=[],n=eJ,tM(),(s=ts())!==o?(tM(),(a=ta())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);n!==o;)r.push(n),n=eJ,tM(),(s=ts())!==o?(tM(),(a=ta())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);eQ=e,e=tO("logicalOp",t,r)}else eJ=e,e=o;return e}(),e0--,e===o&&0===e0&&e5(eu),e}function ts(){var t,r;return t=eJ,"and"===e.substr(eJ,3)?(r="and",eJ+=3):(r=o,0===e0&&e5(ec)),r!==o&&tw()!==o?(eQ=t,t="and"):(eJ=t,t=o),t===o&&(t=eJ,"or"===e.substr(eJ,2)?(r="or",eJ+=2):(r=o,0===e0&&e5(eh)),r!==o&&tw()!==o?(eQ=t,t="or"):(eJ=t,t=o)),t}function ta(){var t,r,n,s,a;return(t=eJ,s=eJ,"not"===e.substr(eJ,3)?(a="not",eJ+=3):(a=o,0===e0&&e5(ef)),a!==o&&tw()!==o?(eQ=s,s="not"):(eJ=s,s=o),(r=s)!==o&&(tM(),(n=to())!==o))?(eQ=t,t=tC("logicalOp",{op:r,right:n})):(eJ=t,t=o),t===o&&(t=to()),t}function to(){var t,r,n,s,a;return(t=eJ,(r=tl())!==o&&(tM(),61===e.charCodeAt(eJ)?(a="=",eJ++):(a=o,0===e0&&e5(el)),a===o&&("!="===e.substr(eJ,2)?(a="!=",eJ+=2):(a=o,0===e0&&e5(ed)),a===o&&("<="===e.substr(eJ,2)?(a="<=",eJ+=2):(a=o,0===e0&&e5(ep)),a===o&&(60===e.charCodeAt(eJ)?(a="<",eJ++):(a=o,0===e0&&e5(eg)),a===o&&(">="===e.substr(eJ,2)?(a=">=",eJ+=2):(a=o,0===e0&&e5(eb)),a===o&&(62===e.charCodeAt(eJ)?(a=">",eJ++):(a=o,0===e0&&e5(ex))))))),(n=a)!==o&&(tM(),(s=tl())!==o)))?(eQ=t,t=tC("binaryOp",{op:n,left:r,right:s})):(eJ=t,t=o),t===o&&(t=tl()),t}function tl(){var e,t,r,n,s,a;if(e=eJ,(t=tu())!==o){for(r=[],n=eJ,tM(),(s=ti())!==o?(tM(),(a=tu())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);n!==o;)r.push(n),n=eJ,tM(),(s=ti())!==o?(tM(),(a=tu())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);eQ=e,e=tO("binaryOp",t,r)}else eJ=e,e=o;return e}function ti(){var t;return 36===e.charCodeAt(eJ)?(t="$",eJ++):(t=o,0===e0&&e5(em)),t}function tu(){var e,t,r,n,s,a;if(e=eJ,(t=th())!==o){for(r=[],n=eJ,tM(),(s=tc())!==o?(tM(),(a=th())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);n!==o;)r.push(n),n=eJ,tM(),(s=tc())!==o?(tM(),(a=th())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);eQ=e,e=tO("binaryOp",t,r)}else eJ=e,e=o;return e}function tc(){var t;return t=e.charAt(eJ),k.test(t)?eJ++:(t=o,0===e0&&e5(ey)),t}function th(){var e,t,r,n,s,a;if(e=eJ,(t=td())!==o){for(r=[],n=eJ,tM(),(s=tf())!==o?(tM(),(a=td())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);n!==o;)r.push(n),n=eJ,tM(),(s=tf())!==o?(tM(),(a=td())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);eQ=e,e=tO("binaryOp",t,r)}else eJ=e,e=o;return e}function tf(){var t;return t=e.charAt(eJ),C.test(t)?eJ++:(t=o,0===e0&&e5(ev)),t}function td(){var e,t,r,n,s,a;if(e=eJ,(t=tg())!==o){for(r=[],n=eJ,tM(),(s=tp())!==o?(tM(),(a=tg())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);n!==o;)r.push(n),n=eJ,tM(),(s=tp())!==o?(tM(),(a=tg())!==o?n=[s,a]:(eJ=n,n=o)):(eJ=n,n=o);eQ=e,e=tO("binaryOp",t,r)}else eJ=e,e=o;return e}function tp(){var t;return t=e.charAt(eJ),S.test(t)?eJ++:(t=o,0===e0&&e5(ej)),t}function tg(){var t,r,n,s,a,l,i,u,c,h,f,d,p,g;for(t=eJ,r=[],n=eJ,s=tM(),(a=tb())!==o?n=a:(eJ=n,n=o);n!==o;)r.push(n),n=eJ,s=tM(),(a=tb())!==o?n=a:(eJ=n,n=o);return(n=tM(),(l=eJ,(i=tA())!==o&&(tM(),40===e.charCodeAt(eJ)?(u="(",eJ++):(u=o,0===e0&&e5(Z)),u!==o&&(tM(),tk(),tM(),(c=tr())===o&&(c=null),tM(),41===e.charCodeAt(eJ)?(h=")",eJ++):(h=o,0===e0&&e5(ee)),h!==o)))?(eQ=l,l=tC("call",{name:i,args:c})):(eJ=l,l=o),l===o&&((f=eJ,(d=tA())!==o)?(tM(),(p=tx())===o&&(p=null),eQ=f,f=(g=p)?tE(d,g):tC("var",{name:d})):(eJ=f,f=o),f===o&&(f=function(){var t,r,n,s,a,l,i,u,c,h,f,d,p,g,b,x,m,y,v;if((t=function(){var t,r,n,s;if(e0++,t=eJ,34===e.charCodeAt(eJ)?(r='"',eJ++):(r=o,0===e0&&e5(eS)),r!==o){for(n=[],s=ty();s!==o;)n.push(s),s=ty();(34===e.charCodeAt(eJ)?(s='"',eJ++):(s=o,0===e0&&e5(eS)),s!==o)?(eQ=t,t=function e(t,r){return 0===r.length?t:e(tC("binaryOp",{op:"$",left:t,right:r.shift()}),r)}(n.length>0&&"literal"===n[0].type&&"string"==typeof n[0].value?n.shift():tC("literal",{value:""}),n)):(eJ=t,t=o)}else eJ=t,t=o;return e0--,t===o&&(r=o,0===e0&&e5(eC)),t}())===o&&(l=eJ,e.substr(eJ,4)===j?(i=j,eJ+=4):(i=o,0===e0&&e5(eD)),i!==o&&tw()!==o?(eQ=l,l=tC("literal",{value:null})):(eJ=l,l=o),(a=l)===o&&(u=eJ,e.substr(eJ,4)===A?(c=A,eJ+=4):(c=o,0===e0&&e5(eP)),c!==o&&tw()!==o?(eQ=u,u=tC("literal",{value:!0})):(eJ=u,u=o),u===o&&(u=eJ,e.substr(eJ,5)===w?(c=w,eJ+=5):(c=o,0===e0&&e5(ez)),c!==o&&tw()!==o?(eQ=u,u=tC("literal",{value:!1})):(eJ=u,u=o)),(a=u)===o)&&(e0++,h=eJ,e.substr(eJ,8)===M?(f=M,eJ+=8):(f=o,0===e0&&e5(eT)),f!==o&&tw()!==o?(eQ=h,h=tC("literal",{value:1/0})):(eJ=h,h=o),h===o&&(h=eJ,d=eJ,p=eJ,(g=tj())!==o?(b=eJ,46===e.charCodeAt(eJ)?(x=".",eJ++):(x=o,0===e0&&e5(ek)),x!==o&&(m=tj())!==o?b=x=[x,m]:(eJ=b,b=o),b===o&&(b=null),x=eJ,m=e.charAt(eJ),F.test(m)?eJ++:(m=o,0===e0&&e5(eL)),m!==o?(y=e.charAt(eJ),I.test(y)?eJ++:(y=o,0===e0&&e5(e_)),y===o&&(y=null),(v=tj())!==o?x=m=[m,y,v]:(eJ=x,x=o)):(eJ=x,x=o),x===o&&(x=null),p=g=[g,b,x]):(eJ=p,p=o),(f=d=p!==o?e.substring(d,eJ):p)!==o&&(eQ=h,f=tC("literal",{value:parseFloat(f)})),h=f),e0--,h===o&&(f=o,0===e0&&e5(eR)),a=h),(t=a)===o))(t=eJ,40===e.charCodeAt(eJ)?(r="(",eJ++):(r=o,0===e0&&e5(Z)),r!==o&&(tM(),(n=tn())!==o&&(tM(),41===e.charCodeAt(eJ)?(s=")",eJ++):(s=o,0===e0&&e5(ee)),s!==o)))?(eQ=t,t=n):(eJ=t,t=o);return t}()),l=f),(s=l)!==o)?(eQ=t,t=function e(t,r,n){if(0===r.length)return n;{let s=tC(t,{op:r.pop(),right:n});return e(t,r,s)}}("unaryOp",r,s)):(eJ=t,t=o),t}function tb(){var t;return t=e.charAt(eJ),O.test(t)?eJ++:(t=o,0===e0&&e5(eA)),t}function tx(){var e,t,r,n,s;if(e=eJ,(t=tm())!==o){for(r=[],n=eJ,tM(),(s=tm())!==o?n=s:(eJ=n,n=o);n!==o;)r.push(n),n=eJ,tM(),(s=tm())!==o?n=s:(eJ=n,n=o);eQ=e,e=[t,...r].flat()}else eJ=e,e=o;return e}function tm(){var t,r,n,s,a,l,i,u;if(t=eJ,91===e.charCodeAt(eJ)?(r="[",eJ++):(r=o,0===e0&&e5(ew)),r!==o){if(tM(),(n=tn())!==o){for(s=[],a=eJ,l=tM(),44===e.charCodeAt(eJ)?(i=",",eJ++):(i=o,0===e0&&e5(et)),i!==o?(tM(),(u=tn())!==o?a=u:(eJ=a,a=o)):(eJ=a,a=o);a!==o;)s.push(a),a=eJ,l=tM(),44===e.charCodeAt(eJ)?(i=",",eJ++):(i=o,0===e0&&e5(et)),i!==o?(tM(),(u=tn())!==o?a=u:(eJ=a,a=o)):(eJ=a,a=o);(a=tM(),93===e.charCodeAt(eJ)?(l="]",eJ++):(l=o,0===e0&&e5(eM)),l!==o)?(eQ=t,t=[n,...s]):(eJ=t,t=o)}else eJ=t,t=o}else eJ=t,t=o;return t===o&&((t=eJ,46===e.charCodeAt(eJ)?(r=".",eJ++):(r=o,0===e0&&e5(ek)),r!==o&&(tM(),(n=tA())!==o))?(eQ=t,t=[tC("literal",{value:n})]):(eJ=t,t=o)),t}function ty(){var t,r,n,s,a;if((t=eJ,96===e.charCodeAt(eJ)?(r="`",eJ++):(r=o,0===e0&&e5(eO)),r!==o&&(n=tM(),(s=tn())!==o&&(tM(),96===e.charCodeAt(eJ)?(a="`",eJ++):(a=o,0===e0&&e5(eO)),a!==o)))?(eQ=t,t=s):(eJ=t,t=o),t===o){if(t=eJ,r=[],(n=tv())!==o)for(;n!==o;)r.push(n),n=tv();else r=o;r!==o&&(eQ=t,r=tC("literal",{value:r.join("")})),t=r}return t}function tv(){var t,r;return t=eJ,'""'===e.substr(eJ,2)?(r='""',eJ+=2):(r=o,0===e0&&e5(eE)),r!==o&&(eQ=t,r='"'),(t=r)===o&&(t=eJ,"``"===e.substr(eJ,2)?(r="``",eJ+=2):(r=o,0===e0&&e5(eF)),r!==o&&(eQ=t,r="`"),(t=r)===o&&(t=e.charAt(eJ),E.test(t)?eJ++:(t=o,0===e0&&e5(eI)))),t}function tj(){var t,r,n;if(t=eJ,r=[],n=e.charAt(eJ),D.test(n)?eJ++:(n=o,0===e0&&e5(eH)),n!==o)for(;n!==o;)r.push(n),n=e.charAt(eJ),D.test(n)?eJ++:(n=o,0===e0&&e5(eH));else r=o;return r!==o?e.substring(t,eJ):r}function tA(){var t,r,n,s,a,l,i,u,v;if(e0++,t=eJ,r=eJ,n=eJ,e0++,i=eJ,e.substr(eJ,4)===j?(u=j,eJ+=4):(u=o,0===e0&&e5(eD)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,4)===A?(u=A,eJ+=4):(u=o,0===e0&&e5(eP)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,5)===w?(u=w,eJ+=5):(u=o,0===e0&&e5(ez)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,8)===M?(u=M,eJ+=8):(u=o,0===e0&&e5(eT)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"if"===e.substr(eJ,2)?(u="if",eJ+=2):(u=o,0===e0&&e5(L)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,4)===c?(u=c,eJ+=4):(u=o,0===e0&&e5(_)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,4)===h?(u=h,eJ+=4):(u=o,0===e0&&e5(N)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"end"===e.substr(eJ,3)?(u="end",eJ+=3):(u=o,0===e0&&e5(q)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,6)===f?(u=f,eJ+=6):(u=o,0===e0&&e5(G)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"do"===e.substr(eJ,2)?(u="do",eJ+=2):(u=o,0===e0&&e5(V)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"for"===e.substr(eJ,3)?(u="for",eJ+=3):(u=o,0===e0&&e5(U)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,4)===d?(u=d,eJ+=4):(u=o,0===e0&&e5(K)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"to"===e.substr(eJ,2)?(u="to",eJ+=2):(u=o,0===e0&&e5(B)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"by"===e.substr(eJ,2)?(u="by",eJ+=2):(u=o,0===e0&&e5(J)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"in"===e.substr(eJ,2)?(u="in",eJ+=2):(u=o,0===e0&&e5(Q)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,5)===p?(u=p,eJ+=5):(u=o,0===e0&&e5(W)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,5)===g?(u=g,eJ+=5):(u=o,0===e0&&e5(X)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,4)===b?(u=b,eJ+=4):(u=o,0===e0&&e5(er)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,5)===x?(u=x,eJ+=5):(u=o,0===e0&&e5(en)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,4)===m?(u=m,eJ+=4):(u=o,0===e0&&e5(es)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,e.substr(eJ,6)===y?(u=y,eJ+=6):(u=o,0===e0&&e5(ea)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"let"===e.substr(eJ,3)?(u="let",eJ+=3):(u=o,0===e0&&e5(ei)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"and"===e.substr(eJ,3)?(u="and",eJ+=3):(u=o,0===e0&&e5(ec)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"or"===e.substr(eJ,2)?(u="or",eJ+=2):(u=o,0===e0&&e5(eh)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o),i===o&&(i=eJ,"not"===e.substr(eJ,3)?(u="not",eJ+=3):(u=o,0===e0&&e5(ef)),u!==o&&(v=tw())!==o?i=u=[u,v]:(eJ=i,i=o))))))))))))))))))))))))),s=i,e0--,s===o?n=void 0:(eJ=n,n=o),n!==o){if(s=e.charAt(eJ),P.test(s)?eJ++:(s=o,0===e0&&e5(e$)),s!==o){for(a=[],l=e.charAt(eJ),z.test(l)?eJ++:(l=o,0===e0&&e5(eN));l!==o;)a.push(l),l=e.charAt(eJ),z.test(l)?eJ++:(l=o,0===e0&&e5(eN));r=n=[n,s,a]}else eJ=r,r=o}else eJ=r,r=o;return t=r!==o?e.substring(t,eJ):r,e0--,t===o&&(r=o,0===e0&&e5(eY)),t}function tw(){var t,r;return t=eJ,e0++,r=e.charAt(eJ),P.test(r)?eJ++:(r=o,0===e0&&e5(e$)),e0--,r===o?t=void 0:(eJ=t,t=o),t}function tM(){var t,r,n,s,a,l;for(e0++,t=eJ,r=[],n=e.charAt(eJ),R.test(n)?eJ++:(n=o,0===e0&&e5(eG));n!==o;)r.push(n),n=e.charAt(eJ),R.test(n)?eJ++:(n=o,0===e0&&e5(eG));if(n=eJ,59===e.charCodeAt(eJ)?(s=";",eJ++):(s=o,0===e0&&e5(eV)),s!==o){for(a=[],l=e.charAt(eJ),T.test(l)?eJ++:(l=o,0===e0&&e5(eU));l!==o;)a.push(l),l=e.charAt(eJ),T.test(l)?eJ++:(l=o,0===e0&&e5(eU));n=s=[s,a]}else eJ=n,n=o;return n===o&&(n=null),t=r=[r,n],e0--,r=o,0===e0&&e5(eq),t}function tk(){var t,r,n,s;if(e0++,t=[],r=eJ,n=tM(),10===e.charCodeAt(eJ)?(s="\n",eJ++):(s=o,0===e0&&e5(eB)),s!==o?r=n=[n,s]:(eJ=r,r=o),r!==o)for(;r!==o;)t.push(r),r=eJ,n=tM(),10===e.charCodeAt(eJ)?(s="\n",eJ++):(s=o,0===e0&&e5(eB)),s!==o?r=n=[n,s]:(eJ=r,r=o);else t=o;return e0--,t===o&&(r=o,0===e0&&e5(eK)),t}function tC(r,n){if("block"===r&&1===n.elems.length)return n.elems[0];let s={type:r};return H[r]&&(s.flow=H[r]),Y[r]&&(s.inspect=Y[r]),Object.assign(s,n),t.meta&&(s.meta={text:e.substring(eQ,eJ),location:e6(eQ,eJ)}),s}function tS(e,t){let[r,n]=e.shift();return e.length>0&&(t=tS(e,t)),tC("if",{cond:r,tbody:n,fbody:t})}function tO(e,t,r){if(0===r.length)return t;{let[n,s]=r.shift(),a=tC(e,{op:n,left:t,right:s});return tO(e,a,r)}}function tE(e,t,r){return void 0===r?tC("index",{name:e,indexes:t}):tC("letIndex",{name:e,indexes:t,value:r})}if(a=u(),t.peg$library)return{peg$result:a,peg$currPos:eJ,peg$FAILED:o,peg$maxFailExpected:eZ,peg$maxFailPos:eX};if(a!==o&&eJ===e.length)return a;throw a!==o&&eJ<e.length&&e5({type:"end"}),r=eZ,n=eX<e.length?e.charAt(eX):null,s=eX<e.length?e6(eX,eX+1):e6(eX,eX),new $($.buildMessage(r,n),r,n,s)})(e.getValue()+"\n"))},[t]);return(0,s.jsx)(_.Ay,{defaultValue:G(),onMount:r,options:{minimap:{enabled:!1}}})}function U(e){let{shapes:t}=e;return(0,s.jsx)("svg",{children:(0,s.jsx)("g",{children:t.map((e,t)=>{let{sprops:r,tprops:n}=e,a={style:{}},o="";switch(r.stroke&&(a.style.stroke=r.stroke),r.fill&&(a.style.fill=r.fill),r.opacity>=0&&r.opacity<1&&(a.style.opacity=r.opacity),0!==r.rotate&&(o+="rotate(".concat(r.rotate,"deg)")),(1!==r.scalex||1!==r.scaley)&&(o+="scale(".concat(r.scalex,",").concat(r.scaley,")")),o&&(a.style.transform=o,a.style.transformOrigin=r.anchor),n&&(a.fontFamily=n.fface,a.fontSize=n.fsize),e.type){case"rect":{let{x:r,y:n,width:o,height:l}=e;return(0,s.jsx)("rect",{x:r,y:n,width:o,height:l,...a},t)}case"circle":{let{cx:r,cy:n,r:o}=e;return(0,s.jsx)("circle",{cx:r,cy:n,r:o,...a},t)}case"ellipse":{let{cx:r,cy:n,rx:o,ry:l}=e;return(0,s.jsx)("ellipse",{cx:r,cy:n,rx:o,ry:l,...a},t)}case"line":{let{x1:r,y1:n,x2:o,y2:l}=e;return(0,s.jsx)("line",{x1:r,y1:n,x2:o,y2:l,...a},t)}case"polygon":{let{points:r}=e;return(0,s.jsx)("polygon",{points:r.join(","),...a},t)}case"text":{let{x:r,y:o,value:l}=e;return(0,s.jsx)("text",{x:r,y:o,textAnchor:n.align,...a,children:l},t)}}})}),...(0,n.sx)("s1eax1jz",{})})}r(64405);var K=r(80247),B=r(9319),J=r(46883),Q=r(73037),W=r(58367),X=r(55439);function Z(e){let{option:t,mode:r,choices:n,updateMode:a}=e,[o,l]=(0,c.useState)(),i=(0,c.useCallback)(e=>{l(e.currentTarget)},[l]),u=(0,c.useCallback)(()=>{l(null)},[l]),h=(0,c.useCallback)(e=>{a(e),u()},[a,u]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.A,{variant:"text",color:"secondary",onClick:i,children:t}),(0,s.jsx)(B.A,{open:!!o,anchorEl:o,onClose:u,children:n.map(e=>(0,s.jsx)(J.A,{selected:r===e,onClick:()=>h(e),children:e.charAt(0).toUpperCase()+e.substr(1)},"menu-item-".concat(t,"-").concat(e)))})]})}function ee(e){let{viewMode:t,updateViewMode:r,runProgram:a}=e;return(0,s.jsx)(Q.A,{children:(0,s.jsxs)(W.A,{color:"light",children:[(0,s.jsx)(X.A,{variant:"body1",children:"START",...(0,n.sx)("s1361y67",{})}),(0,s.jsx)(Z,{option:"view",mode:t,updateMode:r,choices:["graphics","text"]}),(0,s.jsx)(K.A,{variant:"contained",onClick:a,children:"Run",...(0,n.sx)("skv2e7q",{})})]})})}r(60249);var et=r(77812),er=r(33761),en=r(99969),es=r(49359),ea=r(47966),eo=r(58607);function el(e){let{hist:t,snap:r,updateSlider:a}=e,o=t[r]||t[t.length-1];return(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"range",min:0,max:t.length-1,value:r,onChange:a,...(0,n.sx)("s1788ijm",{})}),(0,s.jsx)("div",{children:(0,s.jsxs)(et.A,{children:[(0,s.jsx)(er.A,{children:(0,s.jsxs)(en.A,{children:[(0,s.jsx)(es.A,{children:"Variable",...(0,n.sx)("sjn5wxj",{})}),(0,s.jsx)(es.A,{children:"Value",...(0,n.sx)("s1n6i4gf",{})})]})}),o&&(0,s.jsx)(ea.A,{children:Object.entries(o.gns).map(e=>{let[t,r]=e;return(0,s.jsxs)(en.A,{children:[(0,s.jsx)(es.A,{children:t}),(0,s.jsx)(es.A,{children:ex(r)})]},t)})})],...(0,n.sx)("s11nnm6f",{})}),...(0,n.sx)("skxqsk6",{})})],...(0,n.sx)("sknko69",{})})}function ei(){return(0,s.jsx)("span",{children:"*none*"})}function eu(e){let{value:t}=e;return(0,s.jsx)("span",{children:t?"*true*":"*false*"})}function ec(e){let{value:t}=e;return(0,s.jsx)("span",{children:isFinite(t)?Math.round((t+Number.EPSILON)*1e6)/1e6:t>0?"*infinity*":"-*infinity"})}function eh(e){let{value:t}=e;return(0,s.jsx)("span",{children:t})}function ef(e){let{value:t}=e;return(0,s.jsx)("span",{children:t.toLocaleString()})}function ed(e){let{onShowLess:t,onShowMore:r}=e;return(0,s.jsx)(eo.A,{children:(0,s.jsx)(en.A,{children:(0,s.jsxs)(es.A,{colSpan:"2",children:[(0,s.jsx)(K.A,{onClick:t,children:"Less"}),(0,s.jsx)(K.A,{onClick:r,children:"More"})]})},"trunc")})}function ep(e){let{value:t}=e,[r,a]=(0,c.useState)(5);return(0,s.jsxs)(et.A,{children:[(0,s.jsx)(er.A,{children:(0,s.jsx)(en.A,{children:(0,s.jsx)(es.A,{children:"Items",...(0,n.sx)("sze3ug5",{})})})}),(0,s.jsx)(ea.A,{children:t.slice(0,r).map((e,t)=>(0,s.jsx)(en.A,{children:(0,s.jsx)(es.A,{children:ex(e)})},t))}),t.length>r&&(0,s.jsx)(ed,{onShowLess:()=>a(r-5),onShowMore:()=>a(r+5)})],...(0,n.sx)("s1r1fy6s",{})})}function eg(e){let{value:t}=e,[r,a]=(0,c.useState)(5);return(0,s.jsxs)(et.A,{children:[(0,s.jsx)(er.A,{children:(0,s.jsxs)(en.A,{children:[(0,s.jsx)(es.A,{children:"Key",...(0,n.sx)("s14w5is1",{})}),(0,s.jsx)(es.A,{children:"Value",...(0,n.sx)("svu9m1h",{})})]})}),(0,s.jsx)(ea.A,{children:Object.entries(t).slice(0,r).map(e=>{let[t,r]=e;return(0,s.jsxs)(en.A,{children:[(0,s.jsx)(es.A,{children:ex(t)}),(0,s.jsx)(es.A,{children:ex(r)})]},t)})}),Object.keys(t).length>r&&(0,s.jsx)(ed,{onShowLess:()=>a(r-5),onShowMore:()=>a(r+5)})],...(0,n.sx)("s1kzujup",{})})}r(45884);let eb=Symbol("START_INSPECTOR");function ex(e){if(null==e)return(0,s.jsx)(ei,{});switch(typeof e){case"boolean":return(0,s.jsx)(eu,{value:e});case"number":return(0,s.jsx)(ec,{value:e});case"string":return(0,s.jsx)(eh,{value:e});case"object":if(e[eb])return e[eb](e);if(e.constructor===Date)return(0,s.jsx)(ef,{value:e});if(Array.isArray(e))return(0,s.jsx)(ep,{value:e});return(0,s.jsx)(eg,{value:e});default:throw Error("could not determine type for ".concat(e))}}var em=r(77153);function ey(e){let{buf:t,prompt:r,handleInput:a}=e,[o,i]=(0,c.useState)(""),u=(0,c.useCallback)(()=>{a(o),i("")},[o,a]),h=(0,c.useCallback)(e=>{i(e.target.value)},[i]),f=(0,c.useCallback)(e=>{13===e.keyCode&&u()},[u]),d=(0,c.useRef)();return(0,c.useLayoutEffect)(()=>{d.current.scrollTop=d.current.scrollHeight}),(0,s.jsxs)("div",{children:[r&&(0,s.jsxs)(l.A,{direction:"row",children:[(0,s.jsx)(em.A,{type:"string",margin:"normal",value:o,label:r,onChange:h,onKeyUp:f,autoFocus:!0,...(0,n.sx)("s1nervtg",{})}),(0,s.jsx)(K.A,{color:"primary",size:"small",variant:"contained",onClick:u,children:"OK",...(0,n.sx)("s1f09f2j",{})})],...(0,n.sx)("s1xpfqsk",{})}),(0,s.jsx)("div",{ref:d,children:t.map((e,t)=>(0,s.jsx)("p",{children:e},t)),...(0,n.sx)("smq1ewg",{})})],...(0,n.sx)("s1klgo4r",{})})}r(79578),r(70661);let ev=(0,a.A)({palette:{primary:{main:"#6b9da0"},secondary:{main:"#ffffff"}}});function ej(){let[e,t]=(0,c.useState)("graphics"),[r,a]=(0,c.useState)(()=>{}),[{prompt:f,onInputComplete:d},p]=(0,c.useState)({}),[{hist:g,snap:x},A]=(0,c.useState)({hist:[],snap:0}),[,w]=(0,c.useState)(0),M=(0,c.useCallback)(()=>{w(e=>e+1)},[]),O=(0,c.useRef)(L),R=(0,c.useCallback)(e=>{O.current=e(O.current),M()},[M]),_=(0,c.useRef)([]),H=(0,c.useCallback)(e=>{_.current=e(_.current),M()},[M]),Y=(0,c.useCallback)(()=>{R(()=>L),H(()=>[])},[H,R]),$=(0,c.useCallback)(()=>{A({hist:[],snap:0}),Y()},[Y]),N=(0,c.useCallback)(e=>{d&&(d(e),p({}))},[d]),q=(0,c.useCallback)(e=>{let t=e.target.value,r=g[t];r&&(A({hist:g,snap:t}),R(()=>r.gfx),H(()=>r.buf))},[g,H,R]),G=(0,c.useMemo)(()=>({clearDisplay:Y,setGfx:R,setBuf:H,setInputState:p}),[Y,H,R]),K=(0,c.useCallback)(async()=>{$();let e=[],t=function(){let e,t,r,n,s,a,o;let l={};function i(e){for(let t in e)l[t]=e[t]}function u(e){i(e.globals)}async function c(){for(;s;){let e;let{node:t,state:r}=s,n=M[t.type];if(3===n.length?s=(0,h.jM)(s,s=>{e=n(t,r,s)}):e=n(t,r),e){if(e.then){let t=await e;t&&f(t)}else f(e)}}}function f(e){e.type?"literal"===e.type?p(e.value):"var"===e.type?p({rhs:g(e.name),lhs:{name:e.name}}):(a=(0,h.jM)(a,e=>{e.push(s)}),s=z(e)):e.pop&&("out"===e.pop?d():"over"===e.pop?function(e){for(;s;){let{node:t}=s;if(d(),t.flow===e)break}}(e.flow):"until"===e.pop?function(e){for(;s&&s.node.flow!==e;)d()}(e.flow):"exit"===e.pop&&(s=null,a=[]))}function d(){s.ns&&(n=(0,h.jM)(n,e=>{r=(0,h.c2)(e.pop())})),0===a.length?s=null:a=(0,h.jM)(a,e=>{s=(0,h.c2)(e.pop())})}function p(e){o=e&&I.call(e,"rhs")?e:{rhs:e}}function g(e){return I.call(r,e)?r[e]:t[e]}function x(e,n){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s||I.call(r,e)?r=(0,h.jM)(r,t=>{t[e]=n}):t=(0,h.jM)(t,t=>{t[e]=n})}function A(e,t,r){let n=t.length-1;x(e,function e(s,a){let o=P(s),l=t[a];if(a===n)return o.setindex(s,l,r);{let t=o.getindex(s,l);return o.setindex(s,l,e(t,a+1))}}(g(e),0))}function w(e,t){if(e){let r=e[E];if(r){for(let e=0;e<r.length;++e){let n=r[e];if(void 0!==n){let r=t[e];void 0!==r&&(r.indexes?A(r.name,r.indexes,n):x(r.name,n))}}e=e[F]||r[0]}}p(e)}i(b),u(m),u(y),u(v),u(j),u(S),u(k),u(C);let M={block(e,t,r){let{count:n}=s;return n<e.elems.length?(r.count++,e.elems[n]):D},repeat(e,t,r){switch(t){case 0:if(e.times)return r.state=1,e.times;r.state=3;break;case 1:r.state=2,r.times=o.rhs;break;case 2:let{count:n,times:a}=s;if(n<a)return r.count++,e.body;return D;case 3:return e.body}},for(e,t,r){switch(t){case 0:return r.state=1,e.from;case 1:return r.state=2,r.from=o.rhs,r.count=o.rhs,e.to;case 2:if(e.by)return r.state=3,r.to=o.rhs,e.by;r.state=4,r.to=o.rhs;break;case 3:r.state=4,r.by=o.rhs;break;case 4:let{count:n,to:a,by:l}=s;if(l>0&&n<=a||l<0&&n>=a)return x(e.name,n),r.count+=l,e.body;return D}},forIn(e,t,r){switch(t){case 0:return r.state=1,e.range;case 1:r.state=2,r.iter=P(o.rhs).enumerate(o.rhs);break;case 2:let{iter:n}=s;if(n.more)return x(e.name,n.value),r.iter=n.next(),e.body;return D}},while(e,t,r){switch(t){case 0:return r.state=1,e.cond;case 1:if(o.rhs)return r.state=0,e.body;return D}},if(e,t,r){switch(t){case 0:return r.state=1,e.cond;case 1:if(o.rhs)return r.state=2,e.tbody;if(e.fbody)return r.state=2,e.fbody;return D;case 2:return D}},begin:t=>(e=(0,h.jM)(e,e=>{e[t.name]=t}),D),call(t,a,i){switch(a){case 0:let{count:u}=s;if(t.args&&u<t.args.length)return i.state=1,t.args[u];if(I.call(e,t.name)){i.state=2;break}i.state=4;break;case 1:i.state=0,i.args.push(o.rhs),i.assn.push(o.lhs),i.count++;break;case 2:let c=e[t.name];if(n=(0,h.jM)(n,e=>{e.push(r)}),r={},c.params)for(let e=0;e<c.params.length;++e)x(c.params[e],s.args[e],!0);return i.state=3,i.ns=!0,c.body;case 3:return D;case 4:let f=function(e,t){let r=t.length>0&&P(t[0]).methods[e]||l[e];if(!r)throw Error("object not found or not a function: ".concat(e));return r(...t)}(t.name,s.args);if(f&&f.then)return f.then(e=>(w(e,s.assn),D));return w(f,s.assn),D}},exit:()=>({pop:"exit"}),break:()=>({pop:"over",flow:"loop"}),next:()=>({pop:"until",flow:"loop"}),return(e,t,r){switch(t){case 0:if(e.result)return r.state=1,e.result;return p(),{pop:"over",flow:"call"};case 1:return p(o.rhs),{pop:"over",flow:"call"}}},literal:e=>(p(e.value),D),var:e=>(p({rhs:g(e.name),lhs:{name:e.name}}),D),let(e,t,r){switch(t){case 0:return r.state=1,e.value;case 1:return x(e.name,o.rhs,e.local),D}},index(e,t,r){switch(t){case 0:let{count:n}=s;if(n<e.indexes.length)return r.state=1,e.indexes[n];r.state=2;break;case 1:r.state=0,r.indexes.push(o.rhs),r.count++;break;case 2:let{indexes:a}=s;return p({rhs:function(e,t){let r=t.length-1;return function e(n,s){let a=P(n),o=t[s];return s===r?a.getindex(n,o):e(a.getindex(n,o),s+1)}(g(e),0)}(e.name,a),lhs:{name:e.name,indexes:a}}),D}},letIndex(e,t,r){switch(t){case 0:let{count:n}=s;if(n<e.indexes.length)return r.state=1,e.indexes[n];r.state=2;break;case 1:r.state=0,r.indexes.push(o.rhs),r.count++;break;case 2:return r.state=3,e.value;case 3:return A(e.name,s.indexes,o.rhs),D}},logicalOp(e,t,r){switch(e.op){case"and":switch(t){case 0:return r.state=1,e.left;case 1:if(!o.rhs)return p(!1),D;return r.state=2,e.right;case 2:return p(!!o.rhs),D}break;case"or":switch(t){case 0:return r.state=1,e.left;case 1:if(o.rhs)return p(!0),D;return r.state=2,e.right;case 2:return p(!!o.rhs),D}break;case"not":switch(t){case 0:return r.state=1,e.right;case 1:return p(!o.rhs),D}}},binaryOp(e,t,r){switch(t){case 0:return r.state=1,e.left;case 1:return r.state=2,r.left=o.rhs,e.right;case 2:return p((0,P(s.left).binaryops[e.op])(s.left,o.rhs)),D}},unaryOp(e,t,r){switch(t){case 0:return r.state=1,e.right;case 1:return p((0,P(o.rhs).unaryops[e.op])(o.rhs)),D}}};return{registerGlobals:i,registerHandler:u,run:function(o){return e={},t={},r={},n=[],s=z(o),a=[],p(),c()},snapshot:function(){return{gfn:e,gns:t,lns:r,lst:n,fra:s,fst:a,res:o}},reset:function(l){e=l.gfn,t=l.gns,r=l.lns,n=l.lst,s=l.fra,a=l.fst,o=l.res}}}();t.registerGlobals(T(G)),t.registerGlobals({snapshot(){e.push({...t.snapshot(),gfx:O.current,buf:_.current}),A({hist:e,snap:e.length})}});try{await t.run(r())}catch(e){console.log(e.stack),console.log(t.snapshot())}},[$,G,O,_,r]);return(0,s.jsx)(o.A,{theme:ev,children:(0,s.jsxs)(l.A,{direction:"column",children:[(0,s.jsx)(ee,{viewMode:e,updateViewMode:t,runProgram:K}),(0,s.jsxs)(i.A,{container:!0,children:[(0,s.jsx)(i.A,{size:4,children:(0,s.jsxs)(l.A,{direction:"column",children:["text"!==e&&(0,s.jsx)(u.A,{elevation:3,children:(0,s.jsx)(U,{shapes:O.current.shapes}),...(0,n.sx)("s4pfb03",{})}),"graphics"!==e&&(0,s.jsx)(u.A,{elevation:3,children:(0,s.jsx)(ey,{buf:_.current,prompt:f,handleInput:N}),...(0,n.sx)("s1cpfrbo",{})})],...(0,n.sx)("sxaxzfd",{})}),...(0,n.sx)("sna8llg",{})}),(0,s.jsx)(i.A,{size:4,children:(0,s.jsx)(u.A,{elevation:3,children:(0,s.jsx)(el,{hist:g,snap:x,updateSlider:q}),...(0,n.sx)("sqde4iz",{})}),...(0,n.sx)("s1b4p8j3",{})}),(0,s.jsx)(i.A,{size:4,children:(0,s.jsx)(u.A,{elevation:3,children:(0,s.jsx)(V,{setParser:a}),...(0,n.sx)("s1arwurm",{})}),...(0,n.sx)("s1w7wr0v",{})})],...(0,n.sx)("s7nakk4",{})})],...(0,n.sx)("sfdkwmu",{})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[360,611,441,629,358],()=>t(62184)),_N_E=e.O()}]);